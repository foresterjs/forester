{"version":3,"sources":["../lib/sanitizer.js"],"names":[],"mappings":"AAAA;;;;;;;;AAEA,IAAM,WAAW,QAAQ,UAAR,CAAjB;;IAEM,S;AAEJ,qBAAY,MAAZ,EAAoB;AAAA;;AAClB,SAAK,MAAL,GAAc,MAAd;AACA,SAAK,iBAAL,GAAyB,SAAS,MAAT,CAAzB;AACD;;;;6BAEQ,I,EAAM;;AAEb,UAAI,SAAS,EAAb;;AAEA,UAAI,kBAAkB,SAAS,IAAT,CAAtB;AACA,UAAI,oBAAoB,SAAS,MAAT,CAAxB;;AAEA,WAAK,iBAAL,CAAuB,OAAvB,CAA+B,UAAU,SAAV,EAAqB;;AAElD,YAAI,OAAO,IAAX;AACA,YAAI,KAAK,MAAL,IAAe,KAAK,MAAxB,EAAgC;;AAEhC,YAAI,QAAQ,gBAAgB,GAAhB,CAAoB,KAAK,IAAzB,CAAZ;;AAEA,gBAAQ,UAAU,gBAAV,CAA2B,KAA3B,IAAoC,KAApC,GAA4C,UAAU,OAA9D;;AAEA,YAAI,UAAU,gBAAV,CAA2B,KAA3B,CAAJ,EACE,kBAAkB,GAAlB,CAAsB,KAAK,IAA3B,EAAiC,KAAjC;AACH,OAXD;;AAaA,aAAO,MAAP;AACD;;;qCAEuB,K,EAAO;;AAE7B,aAAO,CAAC,SAAD,EAAY,QAAZ,EAAsB,QAAtB,EAAgC,OAAhC,QAA+C,KAA/C,yCAA+C,KAA/C,MAAyD,CAAhE;AAED;;;;;;AAIH,OAAO,OAAP,GAAiB,SAAjB","file":"sanitizer.js","sourcesContent":["'use strict';\n\nconst traverse = require('traverse');\n\nclass Sanitizer {\n\n  constructor(schema) {\n    this.schema = schema;\n    this.traversableSchema = traverse(schema);\n  }\n\n  sanitize(data) {\n\n    var output = {};\n\n    var traversableData = traverse(data);\n    var traversableOutput = traverse(output);\n\n    this.traversableSchema.forEach(function (subschema) {\n\n      var node = this;\n      if (node.isRoot || node.isLeaf) return;\n\n      var value = traversableData.get(node.path);\n\n      value = Sanitizer.isPrimitiveValue(value) ? value : subschema.default;\n\n      if (Sanitizer.isPrimitiveValue(value))\n        traversableOutput.set(this.path, value);\n    });\n\n    return output;\n  }\n\n  static isPrimitiveValue(value) {\n\n    return ['boolean', 'number', 'string'].indexOf(typeof value) >= 0;\n\n  }\n\n}\n\nmodule.exports = Sanitizer;\n"]}