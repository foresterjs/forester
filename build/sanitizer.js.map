{"version":3,"sources":["../lib/sanitizer.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;AAEb,IAAM,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;;IAE/B,SAAS;AAEb,WAFI,SAAS,CAED,MAAM,EAAE;0BAFhB,SAAS;;AAGX,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACrB,QAAI,CAAC,iBAAiB,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC;GAC3C;;eALG,SAAS;;6BAOJ,IAAI,EAAE;;AAEb,UAAI,MAAM,GAAG,EAAE,CAAC;;AAEhB,UAAI,eAAe,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;AACrC,UAAI,iBAAiB,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC;;AAEzC,UAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,UAAU,SAAS,EAAE;;AAElD,YAAI,IAAI,GAAG,IAAI,CAAC;AAChB,YAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,EAAE,OAAO;;AAEvC,YAAI,KAAK,GAAG,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAE3C,aAAK,GAAG,SAAS,CAAC,gBAAgB,CAAC,KAAK,CAAC,GAAG,KAAK,GAAG,SAAS,CAAC,OAAO,CAAC;;AAEtE,YAAI,SAAS,CAAC,gBAAgB,CAAC,KAAK,CAAC,EACnC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;OAC3C,CAAC,CAAC;;AAEH,aAAO,MAAM,CAAC;KACf;;;qCAEuB,KAAK,EAAE;;AAE7B,aAAO,CAAC,SAAS,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC,OAAO,QAAQ,KAAK,yCAAL,KAAK,EAAC,IAAI,CAAC,CAAC;KAEnE;;;SAlCG,SAAS;;;AAsCf,MAAM,CAAC,OAAO,GAAG,SAAS,CAAC","file":"sanitizer.js","sourcesContent":["'use strict';\n\nconst traverse = require('traverse');\n\nclass Sanitizer {\n\n  constructor(schema) {\n    this.schema = schema;\n    this.traversableSchema = traverse(schema);\n  }\n\n  sanitize(data) {\n\n    var output = {};\n\n    var traversableData = traverse(data);\n    var traversableOutput = traverse(output);\n\n    this.traversableSchema.forEach(function (subschema) {\n\n      var node = this;\n      if (node.isRoot || node.isLeaf) return;\n\n      var value = traversableData.get(node.path);\n\n      value = Sanitizer.isPrimitiveValue(value) ? value : subschema.default;\n\n      if (Sanitizer.isPrimitiveValue(value))\n        traversableOutput.set(this.path, value);\n    });\n\n    return output;\n  }\n\n  static isPrimitiveValue(value) {\n\n    return ['boolean', 'number', 'string'].indexOf(typeof value) >= 0;\n\n  }\n\n}\n\nmodule.exports = Sanitizer;\n"]}